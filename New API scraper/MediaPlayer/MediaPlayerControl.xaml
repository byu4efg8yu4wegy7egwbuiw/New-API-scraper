<UserControl x:Class="New_API_scraper.MediaPlayer.MediaPlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:New_API_scraper.MediaPlayer"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Background="#FF0A0A0A">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>
        
        <!-- Media Element -->
        <MediaElement x:Name="media_element" 
                     Grid.Row="0" 
                     LoadedBehavior="Manual" 
                     UnloadedBehavior="Stop"
                     Stretch="Uniform"
                     StretchDirection="Both"
                     MediaOpened="media_element_opened"
                     MediaEnded="media_element_ended"
                     MediaFailed="media_element_failed"
                     MouseLeftButtonDown="media_element_click"/>
        
        <!-- Video Controls -->
        <Border Grid.Row="1" Background="#FF1A1A1A" BorderBrush="#FF333333" BorderThickness="0,1,0,0">
            <Grid Margin="15,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Play/Pause Button -->
                <Button x:Name="play_pause_btn" 
                       Grid.Column="0" 
                       Content="▶" 
                       Width="40" 
                       Height="40" 
                       Background="#FF00AA44" 
                       Foreground="White" 
                       BorderThickness="0" 
                       FontSize="16" 
                       FontWeight="Bold" 
                       Cursor="Hand"
                       Click="play_pause_click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                   CornerRadius="20"
                                   x:Name="btn_border">
                                <ContentPresenter HorizontalAlignment="Center"
                                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="btn_border" Property="Background" Value="#FF00CC55"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Stop Button -->
                <Button x:Name="stop_btn" 
                       Grid.Column="1" 
                       Content="⏸" 
                       Width="35" 
                       Height="35" 
                       Background="#FF333333" 
                       Foreground="White" 
                       BorderThickness="0" 
                       FontSize="14" 
                       Cursor="Hand"
                       Margin="10,0,0,0"
                       Click="stop_click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                   CornerRadius="17.5"
                                   x:Name="stop_border">
                                <ContentPresenter HorizontalAlignment="Center"
                                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="stop_border" Property="Background" Value="#FF555555"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Progress Slider -->
                <Slider x:Name="progress_slider" 
                       Grid.Column="2" 
                       Margin="15,0" 
                       VerticalAlignment="Center"
                       Minimum="0" 
                       Maximum="100" 
                       Value="0"
                       Thumb.DragStarted="progress_drag_started"
                       Thumb.DragCompleted="progress_drag_completed"
                       ValueChanged="progress_value_changed"
                       PreviewMouseLeftButtonDown="progress_slider_mouse_down">
                    <Slider.Style>
                        <Style TargetType="Slider">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Slider">
                                        <Grid>
                                            <Border x:Name="TrackBackground"
                                                   Background="#FF444444"
                                                   Height="4"
                                                   CornerRadius="2"
                                                   VerticalAlignment="Center"/>
                                            <Track x:Name="PART_Track">
                                                <Track.DecreaseRepeatButton>
                                                    <RepeatButton Command="Slider.DecreaseLarge">
                                                        <RepeatButton.Style>
                                                            <Style TargetType="RepeatButton">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="RepeatButton">
                                                                            <Border Background="#FF00FF88" 
                                                                                   Height="4" 
                                                                                   CornerRadius="2"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </RepeatButton.Style>
                                                    </RepeatButton>
                                                </Track.DecreaseRepeatButton>
                                                <Track.IncreaseRepeatButton>
                                                    <RepeatButton Command="Slider.IncreaseLarge">
                                                        <RepeatButton.Style>
                                                            <Style TargetType="RepeatButton">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="RepeatButton">
                                                                            <Border Background="Transparent"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </RepeatButton.Style>
                                                    </RepeatButton>
                                                </Track.IncreaseRepeatButton>
                                                <Track.Thumb>
                                                    <Thumb>
                                                        <Thumb.Style>
                                                            <Style TargetType="Thumb">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="Thumb">
                                                                            <Ellipse Fill="#FFFFFF" 
                                                                                    Width="12" 
                                                                                    Height="12"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </Thumb.Style>
                                                    </Thumb>
                                                </Track.Thumb>
                                            </Track>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Slider.Style>
                </Slider>
                
                <!-- Time Display -->
                <TextBlock x:Name="time_display" 
                          Grid.Column="3" 
                          Text="00:00 / 00:00" 
                          Foreground="#FFAAAAAA" 
                          FontSize="11" 
                          VerticalAlignment="Center"
                          Margin="0,0,15,0"/>
                
                <!-- Volume Button -->
                <Button x:Name="volume_btn" 
                       Grid.Column="4" 
                       Content="🔊" 
                       Width="30" 
                       Height="30" 
                       Background="Transparent" 
                       Foreground="#FFAAAAAA" 
                       BorderThickness="0" 
                       FontSize="12" 
                       Cursor="Hand"
                       Click="volume_click"/>
                
                <!-- Volume Slider -->
                <Slider x:Name="volume_slider" 
                       Grid.Column="5" 
                       Width="60" 
                       Margin="5,0,0,0" 
                       VerticalAlignment="Center"
                       Minimum="0" 
                       Maximum="1" 
                       Value="0.5"
                       ValueChanged="volume_changed">
                    <Slider.Style>
                        <Style TargetType="Slider">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Slider">
                                        <Grid>
                                            <Border Background="#FF444444"
                                                   Height="3"
                                                   CornerRadius="1.5"
                                                   VerticalAlignment="Center"/>
                                            <Track x:Name="PART_Track">
                                                <Track.DecreaseRepeatButton>
                                                    <RepeatButton Command="Slider.DecreaseLarge">
                                                        <RepeatButton.Style>
                                                            <Style TargetType="RepeatButton">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="RepeatButton">
                                                                            <Border Background="#FFAAAAAA" 
                                                                                   Height="3" 
                                                                                   CornerRadius="1.5"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </RepeatButton.Style>
                                                    </RepeatButton>
                                                </Track.DecreaseRepeatButton>
                                                <Track.IncreaseRepeatButton>
                                                    <RepeatButton Command="Slider.IncreaseLarge">
                                                        <RepeatButton.Style>
                                                            <Style TargetType="RepeatButton">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="RepeatButton">
                                                                            <Border Background="Transparent"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </RepeatButton.Style>
                                                    </RepeatButton>
                                                </Track.IncreaseRepeatButton>
                                                <Track.Thumb>
                                                    <Thumb>
                                                        <Thumb.Style>
                                                            <Style TargetType="Thumb">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="Thumb">
                                                                            <Ellipse Fill="#FFFFFF" 
                                                                                    Width="8" 
                                                                                    Height="8"/>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </Thumb.Style>
                                                    </Thumb>
                                                </Track.Thumb>
                                            </Track>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Slider.Style>
                </Slider>
            </Grid>
        </Border>
    </Grid>
</UserControl>
